<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loja do Diret√≥rio Acad√™mico</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: #f4f4f4;
        }

        header {
            background-color: #008080;
            color: white;
            text-align: center;
            padding: 20px;
            position: relative;
        }

        #logo {
            height: 80px;
        }

        #cart-icon {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 30px;
            cursor: pointer;
        }

        #cart-count {
            background-color: red;
            border-radius: 50%;
            color: white;
            padding: 2px 5px;
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 14px;
        }

        main {
            flex: 1;
            padding: 20px;
        }

        #products {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }

        .product {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 10px;
            width: 22%;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .product:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .product h2 {
            margin-bottom: 10px;
        }

        .product p {
            margin-bottom: 10px;
        }

        input[type="number"] {
            width: 50px;
            text-align: center;
            margin-right: 10px;
        }

        button {
            background-color: #008080;
            color: white;
            padding: 10px 20px;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }

        button:hover {
            background-color: #005757;
        }

        #cart-popup {
            position: fixed;
            top: 60px;
            right: 20px;
            width: 300px;
            padding: 20px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 1000;
            max-height: 400px;
            overflow-y: auto;
        }

        #cart-popup h2 {
            margin-bottom: 10px;
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            margin-bottom: 10px;
        }

        .cart-item {
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
        }

        .cart-item div {
            flex-grow: 1;
        }

        .cart-item button {
            background-color: red;
            color: white;
            border: none;
            padding: 5px;
            cursor: pointer;
            border-radius: 3px;
        }

        footer {
            background-color: #008080;
            color: white;
            text-align: center;
            padding: 10px;
        }

        @media (max-width: 768px) {
            .product {
                width: 100%;
            }

            #products {
                justify-content: center;
                gap: 10px;
            }
        }
    </style>
    <script>
        let cart = [];

        // Adicionar item ao carrinho
        function addToCart(name, price, qtyId) {
            const qty = parseInt(document.getElementById(qtyId).value);
            
            if (qty > 0) {
                const item = cart.find(item => item.name === name);
                if (item) {
                    item.qty += qty;  // Incrementa a quantidade se o item j√° estiver no carrinho
                } else {
                    cart.push({ name, price, qty });  // Adiciona o item ao carrinho
                }
                updateCart();  // Atualiza a exibi√ß√£o do carrinho
                saveCart();  // Salva no localStorage
                updateCartIcon();  // Atualiza o n√∫mero de itens no √≠cone do carrinho
            } else {
                alert('A quantidade deve ser maior que 0');
            }
        }

        // Remover item do carrinho
        function removeFromCart(name) {
            cart = cart.filter(item => item.name !== name);
            updateCart();
            saveCart();
            updateCartIcon();  // Atualiza o n√∫mero de itens no √≠cone do carrinho
        }

        // Atualizar o conte√∫do do carrinho e do popup
        function updateCart() {
            const cartItems = document.getElementById('cart-items-popup');
            cartItems.innerHTML = '';

            let total = 0;
            cart.forEach(item => {
                const itemTotal = item.price * item.qty;
                total += itemTotal;

                const itemElement = document.createElement('div');
                itemElement.className = 'cart-item';
                itemElement.innerHTML = `
                    <div>${item.name} - R$ ${item.price}, Quantidade: ${item.qty}</div>
                    <button onclick="removeFromCart('${item.name}')">Remover</button>
                `;
                cartItems.appendChild(itemElement);
            });
            
            document.getElementById('total-price-popup').textContent = `Total: R$ ${total.toFixed(2)}`;
        }

        // Atualizar o n√∫mero de itens no √≠cone do carrinho
        function updateCartIcon() {
            const cartCount = cart.reduce((acc, item) => acc + item.qty, 0);
            document.getElementById('cart-count').textContent = cartCount;
        }

        // Salvar o carrinho no localStorage
        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // Carregar o carrinho do localStorage
        function loadCart() {
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCart();
                updateCartIcon();  // Atualiza o √≠cone ao carregar o carrinho
            }
        }

        // Exibir ou esconder o popup do carrinho
        function toggleCartPopup() {
            const popup = document.getElementById('cart-popup');
            if (popup.style.display === 'none' || popup.style.display === '') {
                popup.style.display = 'block';
            } else {
                popup.style.display = 'none';
            }
        }

        // Encaminhar o pedido por e-mail
        function proceedToCheckout() {
            const buyerEmail = prompt('Digite seu e-mail para contato:');
            const buyerWhatsApp = prompt('Digite seu n√∫mero de WhatsApp para contato:');
            
            if (buyerEmail && buyerWhatsApp) {
                let orderDetails = 'Pedido:\n\n';
                cart.forEach(item => {
                    orderDetails += `${item.qty}x ${item.name} - R$ ${item.price}\n`;
                });
                orderDetails += `\nTotal: R$ ${cart.reduce((acc, item) => acc + (item.price * item.qty), 0).toFixed(2)}\n`;
                orderDetails += `\nEmail do comprador: ${buyerEmail}\nWhatsApp do comprador: ${buyerWhatsApp}`;

                // Simula√ß√£o de envio do e-mail
                const emailBody = encodeURIComponent(orderDetails);
                const emailLink = `mailto:financeiroufmgdagess@gmail.com?subject=Pedido%20de%20Compra&body=${emailBody}`;

                window.location.href = emailLink;

                alert('Pedido encaminhado com sucesso! Entraremos em contato.');
            } else {
                alert('Por favor, preencha as informa√ß√µes corretamente.');
            }
        }

        window.onload = loadCart;
    </script>
</head>
<body>
    <header>
        <img src="logoda.png" alt="Logo Diret√≥rio Acad√™mico" id="logo">
        <h1>Loja da Faculdade - Diret√≥rio Acad√™mico</h1>
        <div id="cart-icon" onclick="toggleCartPopup()">
            üõí <span id="cart-count">0</span>
        </div>
    </header>

    <!-- Popup do carrinho -->
    <div id="cart-popup">
        <h2>Carrinho de Compras</h2>
        <div id="cart-items-popup"></div>
        <p id="total-price-popup">Total: R$ 0,00</p>
        <button onclick="proceedToCheckout()">Encaminhar</button>
    </div>

    <main>
        <section id="products">
            <div class="product">
                <img src="camisabasica.png" alt="Camisa B√°sica" class="product-image">
                <h2>Camisa B√°sica</h2>
                <p>Pre√ßo: R$ 50,00</p>
                <input type="number" min="1" value="1" id="basic-shirt-qty">
                <button onclick="addToCart('Camisa B√°sica', 50, 'basic-shirt-qty')">Adicionar ao Carrinho</button>
            </div>
            <div class="product">
                <img src="camisapolo.png" alt="Camisa Polo" class="product-image">
                <h2>Camisa Polo</h2>
                <p>Pre√ßo: R$ 75,00</p>
                <input type="number" min="1" value="1" id="polo-shirt-qty">
                <button onclick="addToCart('Camisa Polo', 75, 'polo-shirt-qty')">Adicionar ao Carrinho</button>
            </div>
            <div class="product">
                <img src="jaqueta.png" alt="Jaqueta" class="product-image">
                <h2>Jaqueta</h2>
                <p>Pre√ßo: R$ 120,00</p>
                <input type="number" min="1" value="1" id="jacket-qty">
                <button onclick="addToCart('Jaqueta', 120, 'jacket-qty')">Adicionar ao Carrinho</button>
            </div>
            <div class="product">
                <img src="moletom.png" alt="Moletom" class="product-image">
                <h2>Moletom</h2>
                <p>Pre√ßo: R$ 100,00</p>
                <input type="number" min="1" value="1" id="hoodie-qty">
                <button onclick="addToCart('Moletom', 100, 'hoodie-qty')">Adicionar ao Carrinho</button>
            </div>
        </section>
    </main>

    <footer>
        <p>Diret√≥rio Acad√™mico - Loja de Produtos</p>
    </footer>
</body>
</html>
